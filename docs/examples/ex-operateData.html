<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="zh-tw">
<head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8" />
    <title>example for operateData</title>

    <!-- vue -->
    <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.min.js"></script>

    <!-- ag-grid-community -->
    <script src="https://cdn.jsdelivr.net/npm/ag-grid-community/dist/ag-grid-community.min.noStyle.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/ag-grid-community/dist/styles/ag-grid.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/ag-grid-community/dist/styles/ag-theme-balham.css">

    <!-- ag-grid-vue -->
    <script src="https://cdn.jsdelivr.net/npm/ag-grid-vue/dist/ag-grid-vue.umd.js"></script>

    <!-- w-aggrid-vue -->
    <script src="https://cdn.jsdelivr.net/npm/w-aggrid-vue@1.0.5/dist/w-aggrid-vue.umd.js"></script>

    <!-- w-jsonview-tree -->
    <script src="https://cdn.jsdelivr.net/npm/w-jsonview-tree/dist/w-jsonview-tree.umd.js"></script>

    <!-- load json data for [jdata] -->
    <script src="data-easy.js"></script>

</head>
<body style="font-family:Microsoft JhengHei,Helvetica;">

    <div style="display:flex;">
        <div id="app">
            <w-aggrid-vue
                style="width:620px;"
                ref="rftable"
                v-bind:opt="opt"
            ></w-aggrid-vue>
        </div>
        <div style="margin-left:20px;">
            <div style="margin-bottom:10px; padding-bottom:10px; border-bottom:1px solid #aaa; font-size:20pt;">Option:</div>
            <div id="optjson" style="font-size:10pt;"></div>
        </div>
    </div>

    <script>

        //install w-aggrid-vue
        Vue.component('w-aggrid-vue',window['w-aggrid-vue'])

        //opt
        let opt={
            keys: ['make', 'model' ,'price'],
            rows: jdata,
        }

        //initialize
        let vo=new Vue({
            el: '#app',
            data: {
                opt: opt,
            }
        })

        //slice data
        setTimeout(function(){
            
            //slice
            jdata=jdata.slice(2, 4)

            //set
            vo.opt.rows=jdata

        },500) 

        //push data
        setTimeout(function(){
            
            //push
            jdata.push({
                'make':'new make1',
                'model':'new model1' ,
                'price': 'new price1'
            })
            jdata.push({
                'make':'new make2',
                'model':'new model2' ,
                'price': 'new price2'
            })

            //set
            vo.opt.rows=jdata

        },1000) 

        //show option
        let jv=window['w-jsonview-tree']
        jv(opt, document.querySelector('#optjson'), {expanded:true})

    </script>

</body>
</html>